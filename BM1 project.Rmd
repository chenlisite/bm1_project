---
title: "BM1 project"
author: "Chen Li"
date: "December 10, 2017"
output: html_document
---


```{r setup, echo = FALSE, message = FALSE, results = FALSE, warning = FALSE}
library(ISLR)                          
library(psych)                         # R data description
library(boot)                          # For cv.glm()
library(MPV)                           # For PRESS criterion

library(tidyverse)
library(tidytext)
library(broom) #BMI
library(curl)
library(data.table)
library(dplyr)
library(DT)
library(faraway)
library(forcats)
library(ggplot2)
library(ggridges)
library(ggthemes)
library(haven)
library(HH) #BMI
library(htmltools)
library(janitor)
library(jtools)
library(knitr)
library(knitLatex)
library(leaps) #BMI
library(magrittr)
library(olsrr)
library(readr)
library(readxl)
library(reshape2)
library(rvest)
library(stringr)
library(tools)
library(viridisLite)
library(xtable)

#create fxn for full library load
#watch jg lecture videos for this hw

knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%")
```

```{r clean dataset}
patientdata = read_excel("GHProject_Dataset.xlsx") %>% 
  separate(AdmitDtm, into = c("week", "month","year"), sep = ",")%>%
  mutate(
         day = str_sub(month,-3,-1),
       month = str_sub(month, 1, -4))%>%
  mutate(month= as.numeric(factor(substr(month,2,4), levels = month.abb)))%>%
  arrange(by=PatientID,year,month, day)%>%
  distinct(PatientID, .keep_all = TRUE)
```
  
  
```{r}
# gender: 0="Female",1="Male"
data_tidy$gender<-ifelse(data_tidy$gender == "Male",1,0)
# race
data_tidy=data_tidy %>%
mutate(Race = factor(Race),
       Race = fct_recode(Race, 
                         "0" = "White",
                         "1"="African Amer/Black",       
                         "2"="Asian",
                         "3"="Other/Multiracial",
                         "4"="Native Amer/Alaskan",
                         "5"="Natv Hawaii/Pacf Isl"))

# marital status: 0="married or living as married", 1="widowed or seperated", 2="unmarried"
data_tidy = data_tidy %>%
mutate( MaritalStatus = factor(MaritalStatus),
        MaritalStatus = fct_recode(MaritalStatus, 
                         "0" = "Married",
                         "0"= "Civil Union",
                         "1"= "Widowed",
                         "1" = "Separated",
                         "2"= "Single" ,
                         "2"= "Divorced"))
```

